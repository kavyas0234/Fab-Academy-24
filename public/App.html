/*
 * Seeed Studio XIAO RP2040 LED Control over WiFi
 */
#include <WiFi.h>
#include <WebServer.h>

// SSID and Password of your WiFi router
const char* ssid = "your_ssid";
const char* password = "your_password";

// Define LED pins
#define LED_PIN_0 0
#define LED_PIN_1 1

// Create a web server object
WebServer server(80);

// HTML content
const char MAIN_page[] PROGMEM = R"=====(
<!DOCTYPE html>
<html>
<body>
<center>
<h1>WiFi LED Control</h1>
<h2>LED 0: <a href="/led0on">ON</a> <a href="/led0off">OFF</a></h2>
<h2>LED 1: <a href="/led1on">ON</a> <a href="/led1off">OFF</a></h2>
</center>
</body>
</html>
)=====";

// Function to handle root URL "/"
void handleRoot() {
  server.send(200, "text/html", MAIN_page);
}

// Functions to handle LED control URLs
void handleLED0On() {
  digitalWrite(LED_PIN_0, HIGH);
  server.send(200, "text/html", "LED 0 is ON");
}

void handleLED0Off() {
  digitalWrite(LED_PIN_0, LOW);
  server.send(200, "text/html", "LED 0 is OFF");
}

void handleLED1On() {
  digitalWrite(LED_PIN_1, HIGH);
  server.send(200, "text/html", "LED 1 is ON");
}

void handleLED1Off() {
  digitalWrite(LED_PIN_1, LOW);
  server.send(200, "text/html", "LED 1 is OFF");
}

void setup() {
  // Initialize serial communication
  Serial.begin(115200);

  // Initialize WiFi
  WiFi.begin(ssid, password);
  Serial.println("Connecting to WiFi...");
  while (WiFi.status() != WL_CONNECTED) {
    delay(1000);
    Serial.print(".");
  }
  Serial.println("");
  Serial.print("Connected to WiFi. IP address: ");
  Serial.println(WiFi.localIP());

  // Initialize LED pins
  pinMode(LED_PIN_0, OUTPUT);
  pinMode(LED_PIN_1, OUTPUT);

  // Initialize web server
  server.on("/", handleRoot);
  server.on("/led0on", handleLED0On);
  server.on("/led0off", handleLED0Off);
  server.on("/led1on", handleLED1On);
  server.on("/led1off", handleLED1Off);
  server.begin();
  Serial.println("HTTP server started");
}

void loop() {
  server.handleClient();
}
